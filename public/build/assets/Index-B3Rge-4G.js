import{d as C,n as k,r as c,E as M,C as z,g as A,o,w as h,b as t,i as B,v as N,j as p,h as v,t as l,a as i,F as $,k as E,e as T}from"./app-BLoCHv5u.js";import{_ as F}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B_PbR9UU.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-DL-0N7vS.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardExpose-bCOD5Sld.js";import"./RovingFocusGroup-DqLdizYa.js";const U={class:"w-full px-5"},H={class:"delays-header"},L={class:"delays-controls"},P={class:"search-box"},j={class:"tabs-container"},O={class:"badge"},Q={class:"badge"},S={class:"table-container"},q={key:0,class:"empty-state"},G={key:1,class:"data-table"},J=C({__name:"Index",props:{delays:{type:Array,default:()=>[]}},setup(d){k().props.auth.user;const r=c([]),n=c("active"),m=c(""),b=d;r.value=b.delays,M("delays","UpdateDelay",a=>{r.value.push(a.data)});const x={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",paused:"bg-orange-100 text-orange-800",completed:"bg-green-100 text-green-800"},f=a=>a?new Date(a).toLocaleString():"N/A",g=z({}),w=a=>{g.get(route("delay.update",a),{onFinish:()=>g.reset()})},y=(a,e)=>{if(!a)return"N/A";const u=(e?new Date(e):new Date)-new Date(a),_=Math.floor(u/(1e3*60*60)),D=Math.floor(u%(1e3*60*60)/(1e3*60));return`${_}h ${D}m`};return(a,e)=>(o(),A(I,null,{default:h(()=>[t("div",U,[t("header",H,[e[5]||(e[5]=t("h1",{class:"delays-title"},"Administración de Delays",-1)),t("div",L,[e[4]||(e[4]=t("a",{href:"/delay-export",class:"btn btn-primary"},"Exportar Excel",-1)),t("div",P,[e[3]||(e[3]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"search-icon",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1)),B(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Buscar delays...",class:"search-input"},null,512),[[N,m.value]])])])]),t("div",j,[t("button",{onClick:e[1]||(e[1]=s=>n.value="active"),class:p(["tab-btn",{active:n.value==="active"}])},[e[6]||(e[6]=v(" Delays Activos ")),t("span",O,l(d.delays.filter(s=>s.status!=="completed").length),1)],2),t("button",{onClick:e[2]||(e[2]=s=>n.value="completed"),class:p(["tab-btn",{active:n.value==="completed"}])},[e[7]||(e[7]=v(" Histórico ")),t("span",Q,l(d.delays.filter(s=>s.status==="completed").length),1)],2)]),t("div",S,[r.value.length===0?(o(),i("div",q,[e[8]||(e[8]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"empty-icon",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),t("p",null,"No hay delays "+l(n.value==="active"?"activos":"completados"),1)])):(o(),i("table",G,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Vehículo"),t("th",null,"Inicio"),t("th",null,"Fin"),t("th",null,"Duración"),t("th",null,"Estado"),t("th",null,"Motivo"),t("th",null,"Usuario"),t("th",null,"Opciones")])],-1)),t("tbody",null,[(o(!0),i($,null,E(r.value,s=>(o(),i("tr",{key:s.id},[t("td",null,l(s.user_id),1),t("td",null,l(s.vehicle.code),1),t("td",null,l(f(s.start_time)),1),t("td",null,l(f(s.end_time)),1),t("td",null,l(y(s.start_time,s.end_time)),1),t("td",null,[t("span",{class:p(["status-badge",x[s.status]])},l(s.status==="pending"?"Pendiente":s.status==="in_progress"?"En progreso":s.status==="paused"?"Pausado":"Completado"),3)]),t("td",null,l(s.reason.description||"N/A"),1),t("td",null,l(s.user.name),1),t("td",null,[T(F,{onClick:u=>w(s.id)},{default:h(()=>e[9]||(e[9]=[v("Finalizar demora")])),_:2},1032,["onClick"])])]))),128))])]))])])]),_:1}))}}),tt=V(J,[["__scopeId","data-v-bf2f8073"]]);export{tt as default};
