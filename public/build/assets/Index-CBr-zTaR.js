import{d as C,n as k,r as v,E as M,C as z,g as A,o as i,w as b,b as t,i as B,v as N,j as m,h as f,t as l,a as u,F as $,k as E,e as T}from"./app-BY5JL9eD.js";import{_ as F}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CLhV90p3.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-C03MaA-V.js";import"./useForwardExpose-BsNAfIJs.js";import"./RovingFocusGroup-Do8N6f-t.js";const V={class:"w-full px-5"},U={class:"delays-header"},H={class:"delays-controls"},L={class:"search-box"},O={class:"tabs-container"},P={class:"badge"},j={class:"badge"},Q={class:"table-container"},S={key:0,class:"empty-state"},q={key:1,class:"data-table"},G=C({__name:"Index",props:{delays:{type:Array,default:()=>[]}},setup(o){k().props.auth.user;const r=v([]),n=v("active"),d=v(""),c=o;r.value=c.delays,M("delays","UpdateDelay",a=>{r.value.push(a.data)});const x={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",paused:"bg-orange-100 text-orange-800",completed:"bg-green-100 text-green-800"},g=a=>a?new Date(a).toLocaleString():"N/A",h=z({}),y=a=>{h.get(route("delay.update",a),{onFinish:()=>h.reset()})},_=(a,e)=>{if(!a)return"N/A";const p=(e?new Date(e):new Date)-new Date(a),w=Math.floor(p/(1e3*60*60)),D=Math.floor(p%(1e3*60*60)/(1e3*60));return`${w}h ${D}m`};return(a,e)=>(i(),A(I,null,{default:b(()=>[t("div",V,[t("header",U,[e[5]||(e[5]=t("h1",{class:"delays-title"},"Administración de Delays",-1)),t("div",H,[e[4]||(e[4]=t("a",{href:"/delay-export",class:"btn btn-primary"},"Exportar Excel",-1)),t("div",L,[e[3]||(e[3]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"search-icon",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1)),B(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),type:"text",placeholder:"Buscar delays...",class:"search-input"},null,512),[[N,d.value]])])])]),t("div",O,[t("button",{onClick:e[1]||(e[1]=s=>n.value="active"),class:m(["tab-btn",{active:n.value==="active"}])},[e[6]||(e[6]=f(" Delays Activos ")),t("span",P,l(o.delays.filter(s=>s.status!=="completed").length),1)],2),t("button",{onClick:e[2]||(e[2]=s=>n.value="completed"),class:m(["tab-btn",{active:n.value==="completed"}])},[e[7]||(e[7]=f(" Histórico ")),t("span",j,l(o.delays.filter(s=>s.status==="completed").length),1)],2)]),t("div",Q,[r.value.length===0?(i(),u("div",S,[e[8]||(e[8]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"empty-icon",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),t("p",null,"No hay delays "+l(n.value==="active"?"activos":"completados"),1)])):(i(),u("table",q,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Vehículo"),t("th",null,"Inicio"),t("th",null,"Fin"),t("th",null,"Duración"),t("th",null,"Estado"),t("th",null,"Motivo"),t("th",null,"Usuario"),t("th",null,"Opciones")])],-1)),t("tbody",null,[(i(!0),u($,null,E(r.value,s=>(i(),u("tr",{key:s.id},[t("td",null,l(s.user_id),1),t("td",null,l(s.vehicle.code),1),t("td",null,l(g(s.start_time)),1),t("td",null,l(g(s.end_time)),1),t("td",null,l(_(s.start_time,s.end_time)),1),t("td",null,[t("span",{class:m(["status-badge",x[s.status]])},l(s.status==="pending"?"Pendiente":s.status==="in_progress"?"En progreso":s.status==="paused"?"Pausado":"Completado"),3)]),t("td",null,l(s.reason.description||"N/A"),1),t("td",null,l(s.user.name),1),t("td",null,[T(F,{onClick:p=>y(s.id)},{default:b(()=>e[9]||(e[9]=[f("Finalizar demora")])),_:2},1032,["onClick"])])]))),128))])]))])])]),_:1}))}}),J=(o,r)=>{const n=o.__vccOpts||o;for(const[d,c]of r)n[d]=c;return n},Z=J(G,[["__scopeId","data-v-bf2f8073"]]);export{Z as default};
